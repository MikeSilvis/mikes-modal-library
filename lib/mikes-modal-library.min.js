!function(a,b,c){function d(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}function e(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function f(a,b,c,d){var e=["opacity",b,~~(a*100),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(n.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",n.cssRules.length),l[e]=1),e}function g(a,b){var d=a.style,e,f;if(d[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<k.length;f++){e=k[f]+b;if(d[e]!==c)return e}}function h(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function i(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function j(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var k=["webkit","Moz","ms","O"],l={},m,n=function(){var a=d("style",{type:"text/css"});return e(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),o={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},p=function q(a){if(!this.spin)return new q(a);this.opts=i(a||{},q.defaults,o)};p.defaults={},i(p.prototype,{spin:function(a){this.stop();var b=this,c=b.opts,e=b.el=h(d(0,{className:c.className}),{position:"relative",width:0,zIndex:c.zIndex}),f=c.radius+c.length+c.width,g,i;a&&(a.insertBefore(e,a.firstChild||null),i=j(a),g=j(e),h(e,{left:(c.left=="auto"?i.x-g.x+(a.offsetWidth>>1):parseInt(c.left,10)+f)+"px",top:(c.top=="auto"?i.y-g.y+(a.offsetHeight>>1):parseInt(c.top,10)+f)+"px"})),e.setAttribute("aria-role","progressbar"),b.lines(e,b.opts);if(!m){var k=0,l=c.fps,n=l/c.speed,o=(1-c.opacity)/(n*c.trail/100),p=n/c.lines;(function q(){k++;for(var a=c.lines;a;a--){var d=Math.max(1-(k+a*p)%n*o,c.opacity);b.opacity(e,c.lines-a,d,c)}b.timeout=b.el&&setTimeout(q,~~(1e3/l))})()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this},lines:function(a,b){function c(a,c){return h(d(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*g+b.rotate)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.corners*b.width>>1)+"px"})}var g=0,i;for(;g<b.lines;g++)i=h(d(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:m&&f(b.opacity,b.trail,g,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(i,h(c("#000","0 0 4px #000"),{top:"2px"})),e(a,e(i,c(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),function(){function a(a,b){return d("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}var b=h(d("group"),{behavior:"url(#default#VML)"});!g(b,"transform")&&b.adj?(n.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(b,c){function d(){return h(a("group",{coordsize:i+" "+i,coordorigin:-g+" "+ -g}),{width:i,height:i})}function f(b,f,i){e(k,e(h(d(),{rotation:360/c.lines*b+"deg",left:~~f}),e(h(a("roundrect",{arcsize:c.corners}),{width:g,height:c.width,left:c.radius,top:-c.width>>1,filter:i}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var g=c.length+c.width,i=2*g,j=-(c.width+c.length)*2+"px",k=h(d(),{position:"absolute",top:j,left:j}),l;if(c.shadow)for(l=1;l<=c.lines;l++)f(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=c.lines;l++)f(l);return e(b,k)},p.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}):m=g(b,"animation")}(),typeof define=="function"&&define.amd?define(function(){return p}):a.Spinner=p}(window,document),function(){var a,b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}};$.fn.mikesModal=function(a){return this.modal=new b($(this))},b=function(){function b(a){this.addClose=e(this.addClose,this),this.marginLeft=e(this.marginLeft,this),this.marginTop=e(this.marginTop,this),this.imageMaxHeight=e(this.imageMaxHeight,this),this.imageMaxWidth=e(this.imageMaxWidth,this),this.triggerClose=e(this.triggerClose,this),this.imagePosition=e(this.imagePosition,this),this.imageLoaded=e(this.imageLoaded,this),this.loaded=e(this.loaded,this),this.closed=e(this.closed,this),this.opened=e(this.opened,this),this.bindMethods=e(this.bindMethods,this),this.createAllClasses=e(this.createAllClasses,this),this.modalBox=a,this.bindMethods(),this.createAllClasses(),this.modalBox.trigger("open"),this.imageLoaded(),this.addClose(),this.triggerClose()}return b.prototype.createAllClasses=function(){return new c(this.modalBox),new a(this.modalBox),new d(this.modalBox)},b.prototype.bindMethods=function(){return this.opened(),this.loaded(),this.closed()},b.prototype.opened=function(){var a=this;return this.modalBox.bind("open",function(){return a.modalBox.find("img").css({"max-width":a.imageMaxWidth(),"max-height":a.imageMaxHeight()})})},b.prototype.closed=function(){var a=this;return this.modalBox.bind("close",function(){return a.modalBox.hide()})},b.prototype.loaded=function(){var a=this;return this.modalBox.bind("loaded",function(){return a.modalBox.fadeIn("slow")})},b.prototype.imageLoaded=function(){var a=this;this.modalBox.find("img").first().load(function(){return a.imagePosition()});if(this.modalBox.find("img")[0].complete)return this.imagePosition()},b.prototype.imagePosition=function(){return this.modalBox.trigger("loaded").css({"margin-top":this.marginTop(),"margin-left":this.marginLeft()}),this.modalBox.css({"margin-top":this.marginTop(),"margin-left":this.marginLeft()}),this.modalBox.css({"margin-top":this.marginTop(),"margin-left":this.marginLeft()})},b.prototype.triggerClose=function(){var a=this;return $(document).keyup(function(b){if(b.keyCode===27)return a.modalBox.trigger("close")}),$(document).bind("touchend click",function(b){if(b.target.id==="the-lights")return a.modalBox.trigger("close")}),this.modalBox.find(".close").click(function(){return a.modalBox.trigger("close")})},b.prototype.imageMaxWidth=function(){return window.innerWidth*.8-300},b.prototype.imageMaxHeight=function(){return window.innerHeight*.8},b.prototype.marginTop=function(){return"-"+this.modalBox.height()/2+"px"},b.prototype.marginLeft=function(){return"-"+this.modalBox.width()/2+"px"},b.prototype.addClose=function(){return $(".description").before("<div class='close'>x</div>")},b}(),d=function(){function a(a){this.bindClosed=e(this.bindClosed,this),this.bindLoaded=e(this.bindLoaded,this),this.modalBox=a,this.bindLoaded(),this.bindClosed()}return a.prototype.bindLoaded=function(){var a=this;return this.modalBox.bind("loaded",function(){return $("#the-lights").length?a.theLights=$("#the-lights"):(a.theLights=$("<div id='the-lights'></div>"),a.theLights.appendTo("body").css({height:$(document).height()}))})},a.prototype.bindClosed=function(){var a=this;return this.modalBox.bind("close",function(){return a.theLights.remove()})},a}(),c=function(){function a(a){this.bindClosed=e(this.bindClosed,this),this.bindLoaded=e(this.bindLoaded,this),this.modalBox=a,this.bindLoaded(),this.bindClosed(),this.html=$("html")}return a.prototype.bindLoaded=function(){var a=this;return this.modalBox.bind("loaded",function(){return a.html.css("overflow","hidden")})},a.prototype.bindClosed=function(){var a=this;return this.modalBox.bind("close",function(){return a.html.css("overflow","auto")})},a}(),a=function(){function a(a){this.opts=e(this.opts,this),this.bindLoaded=e(this.bindLoaded,this),this.bindOpened=e(this.bindOpened,this),this.modalBox=a,this.bindOpened(),this.bindLoaded()}return a.prototype.bindOpened=function(){var a=this;return this.modalBox.bind("open",function(){var b;return a.loading=$("<div id='loading-modal'></div>"),a.loading.appendTo("body").css({top:$(window).scrollTop()+300+"px"}),b=(new Spinner(a.opts())).spin(document.getElementById("loading-modal"))})},a.prototype.bindLoaded=function(){var a=this;return this.modalBox.bind("loaded",function(){return a.loading.remove()})},a.prototype.opts=function(){return{lines:9,length:30,width:20,radius:40,corners:1,rotate:19,color:"#fff",speed:1.2,trail:42,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}},a}()}.call(this)
